<p>
    Reisduur:
    <span
        >{{ travelAdvice.plannedDurationInMinutes * 1000 * 60 | date: 'HH:mm' : '+0000' }}
        @if (
            travelAdvice.actualDurationInMinutes &&
            travelAdvice.plannedDurationInMinutes != travelAdvice.actualDurationInMinutes
        ) {
            <span class="minor-info-change"
                >({{ travelAdvice.actualDurationInMinutes * 1000 * 60 | date: 'HH:mm' : '+0000' }})</span
            >
        }
    </span>
</p>
<div class="container">
    @for (routePart of travelAdvice.route; track routePart; let index = $index) {
        <div
            class="row align-items-start"
            [class]="routePart.cancelled == true ? 'cancelled' : 'normal'"
        >
            @if (routePart.cancelled) {
                <p>Rijdt niet</p>
            }

            <div class="col-12">
                <div class="row">
                    <div class="col-3 text-right">
                        <p class="text-right">{{ routePart.plannedDeparture | date: 'H:mm' }}</p>
                    </div>
                    <div class="col-6">
                        <div [class]="routePart.cancelled == true ? 'cancellation' : 'normal'">
                            <p>
                                {{ routePart.departureStation }}
                            </p>
                            <small>
                                Een reis met {{ routePart.lineName }} ({{ routePart.type }}) richting
                                {{ routePart.direction ?? 'onbekend' }}.
                            </small>
                            <p>Stopt op:</p>
                            @for (stop of routePart.stops; track stop; let stopIndex = $index) {
                                @if (stopIndex > 0 && stopIndex + 1 < routePart.stops.length) {
                                    <p>
                                        <app-track-selection [plannedTrack]="stop.plannedDepartureTrack" [actualTrack]="stop.actualDepartureTrack"></app-track-selection>
                                        {{ stop.plannedArrival | date: 'H:mm' }} -
                                        {{ stop.name }}
                                    </p>
                                }
                            }
                        </div>
                    </div>
                    <div class="col-3">
                        <app-track-selection [plannedTrack]="routePart.plannedDepartureTrack" [actualTrack]="routePart.actualDepartureTrack"></app-track-selection>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="row align-items-start">
                    <div class="col-3">
                        <p>{{ routePart.plannedArrival | date: 'H:mm' }}</p>
                    </div>
                    <div class="col-6">
                        <p>{{ routePart.arrivalStation }}</p>
                    </div>
                    <div class="col-3">
                        @if (
                            routePart.actualArrivalTrack &&
                            routePart.actualArrivalTrack != routePart.plannedArrivalTrack
                        ) {
                            <p>
                                <span class="major-info-change">({{ routePart.plannedArrivalTrack }})</span> >
                                <span class="minor-info-change">{{ routePart.actualArrivalTrack }}</span>
                            </p>
                        } @else {
                            <p>{{ routePart.plannedArrivalTrack }}</p>
                        }
                    </div>
                </div>
            </div>
        </div>
        <div
            class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-1 border-bottom"
        ></div>
    }
</div>
<p>Bron: {{ travelAdvice.source }}</p>
